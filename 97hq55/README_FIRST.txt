
# Next.js คลิกอย่างเดียวให้รันพื้นหลัง (Windows + NSSM)

เอกสารนี้อธิบายแบบ "มือใหม่สุด" ขั้นตอนที่ต้องทำ **โดยไม่ต้องพิมพ์คำสั่ง**

## ก่อนเริ่ม
- คุณมีโปรเจกต์ Next.js อยู่แล้ว (มีไฟล์ `package.json`)
- ใน `package.json` ต้องมีสคริปต์:
  ```json
  {
    "scripts": {
      "build": "next build",
      "start": "next start -p 3000"
    }
  }
  ```
  ถ้ายังไม่มี ให้เปิด `package.json` ด้วย Notepad แล้วเพิ่ม/แก้ไขให้เหมือนด้านบน จากนั้นบันทึก

## ขั้นตอนทีละข้อ (ไม่ต้องเปิด Command Prompt)

1) **ติดตั้ง Node.js** (ถ้ายังไม่มี)  
   - เปิดเบราว์เซอร์ ไปที่ `https://nodejs.org/` → กดติดตั้ง LTS → ดับเบิลคลิกไฟล์ติดตั้ง → Next/Next จนเสร็จ

2) **วางโฟลเดอร์นี้ลงในรากโปรเจกต์ Next.js ของคุณ**  
   - เช่น ถ้าโปรเจกต์อยู่ที่ `D:\code\smart-sobsuan\` ให้คัดลอกไฟล์ทั้งหมดใน zip นี้ไปวางในโฟลเดอร์นั้น

3) **ดาวน์โหลด NSSM**  
   - ไปที่ `https://nssm.cc/download` แล้วดาวน์โหลดเวอร์ชัน 64-bit  
   - แตกไฟล์ แล้วคัดลอก `nssm.exe` มาไว้ที่โฟลเดอร์ `tools` (อยู่ในโฟลเดอร์นี้)  
   - ตอนนี้โครงสร้างคร่าวๆ จะเป็น
     ```
     <โปรเจกต์>\
       install_service.bat
       stop_service.bat
       uninstall_service.bat
       Open-App.html
       tools\
         nssm.exe   (วางตรงนี้)
     ```

4) **ติดตั้งและสตาร์ท Service อัตโนมัติ**  
   - ดับเบิลคลิก `install_service.bat`  
   - จะมีหน้าต่างถามสิทธิ์ Admin → กด Yes  
   - ระบบจะ: ติดตั้งแพ็กเกจ → Build โปรเจกต์ → ติดตั้ง Windows Service → เริ่มรันพื้นหลัง → เปิดเว็บให้เอง

5) **เปิดแอป**  
   - ดับเบิลคลิก `Open-App.html` เพื่อเข้า `http://localhost:3000/`  
   - หรือเปิดเบราว์เซอร์พิมพ์ `http://localhost:3000/`

6) **หยุด หรือ ถอนการติดตั้ง (เมื่อต้องการ)**  
   - หยุด: ดับเบิลคลิก `stop_service.bat`  
   - ถอนการติดตั้ง: ดับเบิลคลิก `uninstall_service.bat`

## โน้ตสำคัญ
- ถ้าต้องการเปลี่ยนพอร์ต ให้เปิด `package.json` และแก้ `start` เป็น `next start -p 3001` จากนั้นดับเบิลคลิก `install_service.bat` ใหม่อีกรอบ
- ไฟล์ Log ดูได้ที่โฟลเดอร์ `_logs` (สร้างอัตโนมัติหลังติดตั้ง)
- ถ้าดับเบิลคลิก `install_service.bat` แล้วขึ้นว่าไม่พบ Node.js หรือ nssm.exe ให้ทำตามข้อความแจ้งในหน้าต่างนั้น

เสร็จแล้ว! ตั้งแต่ตอนนี้ Next.js ของคุณจะรันเป็น **พื้นหลัง** แบบ Windows Service โดยที่ไม่ต้องพิมพ์คำสั่งใดๆ
